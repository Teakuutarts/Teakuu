<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta charset="utf-8" />
<title>Mine:Craft Your Skin</title>
<link rel="shortcut icon" type="image/png" href="i/favicon.png" />

<script type="text/javascript">
/* <![CDATA[ */
// glMatrix v0.9.6
glMatrixArrayType=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;var vec3={};vec3.create=function(a){var b=new glMatrixArrayType(3);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2]}return b};vec3.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};vec3.add=function(a,b,c){if(!c||a==c){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2];return a}c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};
vec3.subtract=function(a,b,c){if(!c||a==c){a[0]-=b[0];a[1]-=b[1];a[2]-=b[2];return a}c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};vec3.negate=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};vec3.scale=function(a,b,c){if(!c||a==c){a[0]*=b;a[1]*=b;a[2]*=b;return a}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};
vec3.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=Math.sqrt(c*c+d*d+e*e);if(g){if(g==1){b[0]=c;b[1]=d;b[2]=e;return b}}else{b[0]=0;b[1]=0;b[2]=0;return b}g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;return b};vec3.cross=function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var g=b[0],f=b[1];b=b[2];c[0]=e*b-a*f;c[1]=a*g-d*b;c[2]=d*f-e*g;return c};vec3.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};
vec3.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b){c[0]=0;c[1]=0;c[2]=0;return c}b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c};vec3.lerp=function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d};vec3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var mat3={};
mat3.create=function(a){var b=new glMatrixArrayType(9);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8]}return b};mat3.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};mat3.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};
mat3.transpose=function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b};mat3.toMat4=function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
mat3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};var mat4={};mat4.create=function(a){var b=new glMatrixArrayType(16);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15]}return b};
mat4.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};mat4.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
mat4.transpose=function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[3],g=a[6],f=a[7],h=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=g;a[11]=a[14];a[12]=e;a[13]=f;a[14]=h;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};
mat4.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],f=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],o=a[11],m=a[12],n=a[13],p=a[14];a=a[15];return m*k*h*e-j*n*h*e-m*f*l*e+g*n*l*e+j*f*p*e-g*k*p*e-m*k*d*i+j*n*d*i+m*c*l*i-b*n*l*i-j*c*p*i+b*k*p*i+m*f*d*o-g*n*d*o-m*c*h*o+b*n*h*o+g*c*p*o-b*f*p*o-j*f*d*a+g*k*d*a+j*c*h*a-b*k*h*a-g*c*l*a+b*f*l*a};
mat4.inverse=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],f=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],o=a[10],m=a[11],n=a[12],p=a[13],r=a[14],s=a[15],A=c*h-d*f,B=c*i-e*f,t=c*j-g*f,u=d*i-e*h,v=d*j-g*h,w=e*j-g*i,x=k*p-l*n,y=k*r-o*n,z=k*s-m*n,C=l*r-o*p,D=l*s-m*p,E=o*s-m*r,q=1/(A*E-B*D+t*C+u*z-v*y+w*x);b[0]=(h*E-i*D+j*C)*q;b[1]=(-d*E+e*D-g*C)*q;b[2]=(p*w-r*v+s*u)*q;b[3]=(-l*w+o*v-m*u)*q;b[4]=(-f*E+i*z-j*y)*q;b[5]=(c*E-e*z+g*y)*q;b[6]=(-n*w+r*t-s*B)*q;b[7]=(k*w-o*t+m*B)*q;b[8]=(f*D-h*z+j*x)*q;
b[9]=(-c*D+d*z-g*x)*q;b[10]=(n*v-p*t+s*A)*q;b[11]=(-k*v+l*t-m*A)*q;b[12]=(-f*C+h*y-i*x)*q;b[13]=(c*C-d*y+e*x)*q;b[14]=(-n*u+p*B-r*A)*q;b[15]=(k*u-l*B+o*A)*q;return b};mat4.toRotationMat=function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
mat4.toMat3=function(a,b){b||(b=mat3.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};mat4.toInverseMat3=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[4],f=a[5],h=a[6],i=a[8],j=a[9],k=a[10],l=k*f-h*j,o=-k*g+h*i,m=j*g-f*i,n=c*l+d*o+e*m;if(!n)return null;n=1/n;b||(b=mat3.create());b[0]=l*n;b[1]=(-k*d+e*j)*n;b[2]=(h*d-e*f)*n;b[3]=o*n;b[4]=(k*c-e*i)*n;b[5]=(-h*c+e*g)*n;b[6]=m*n;b[7]=(-j*c+d*i)*n;b[8]=(f*c-d*g)*n;return b};
mat4.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2],f=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],o=a[9],m=a[10],n=a[11],p=a[12],r=a[13],s=a[14];a=a[15];var A=b[0],B=b[1],t=b[2],u=b[3],v=b[4],w=b[5],x=b[6],y=b[7],z=b[8],C=b[9],D=b[10],E=b[11],q=b[12],F=b[13],G=b[14];b=b[15];c[0]=A*d+B*h+t*l+u*p;c[1]=A*e+B*i+t*o+u*r;c[2]=A*g+B*j+t*m+u*s;c[3]=A*f+B*k+t*n+u*a;c[4]=v*d+w*h+x*l+y*p;c[5]=v*e+w*i+x*o+y*r;c[6]=v*g+w*j+x*m+y*s;c[7]=v*f+w*k+x*n+y*a;c[8]=z*d+C*h+D*l+E*p;c[9]=z*e+C*i+D*o+E*r;c[10]=z*
g+C*j+D*m+E*s;c[11]=z*f+C*k+D*n+E*a;c[12]=q*d+F*h+G*l+b*p;c[13]=q*e+F*i+G*o+b*r;c[14]=q*g+F*j+G*m+b*s;c[15]=q*f+F*k+G*n+b*a;return c};mat4.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c};
mat4.multiplyVec4=function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*g+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*g+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*g+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*g+a[15]*b;return c};
mat4.translate=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c){a[12]=a[0]*d+a[4]*e+a[8]*b+a[12];a[13]=a[1]*d+a[5]*e+a[9]*b+a[13];a[14]=a[2]*d+a[6]*e+a[10]*b+a[14];a[15]=a[3]*d+a[7]*e+a[11]*b+a[15];return a}var g=a[0],f=a[1],h=a[2],i=a[3],j=a[4],k=a[5],l=a[6],o=a[7],m=a[8],n=a[9],p=a[10],r=a[11];c[0]=g;c[1]=f;c[2]=h;c[3]=i;c[4]=j;c[5]=k;c[6]=l;c[7]=o;c[8]=m;c[9]=n;c[10]=p;c[11]=r;c[12]=g*d+j*e+m*b+a[12];c[13]=f*d+k*e+n*b+a[13];c[14]=h*d+l*e+p*b+a[14];c[15]=i*d+o*e+r*b+a[15];return c};
mat4.scale=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c){a[0]*=d;a[1]*=d;a[2]*=d;a[3]*=d;a[4]*=e;a[5]*=e;a[6]*=e;a[7]*=e;a[8]*=b;a[9]*=b;a[10]*=b;a[11]*=b;return a}c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};
mat4.rotate=function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var f=Math.sqrt(e*e+g*g+c*c);if(!f)return null;if(f!=1){f=1/f;e*=f;g*=f;c*=f}var h=Math.sin(b),i=Math.cos(b),j=1-i;b=a[0];f=a[1];var k=a[2],l=a[3],o=a[4],m=a[5],n=a[6],p=a[7],r=a[8],s=a[9],A=a[10],B=a[11],t=e*e*j+i,u=g*e*j+c*h,v=c*e*j-g*h,w=e*g*j-c*h,x=g*g*j+i,y=c*g*j+e*h,z=e*c*j+g*h;e=g*c*j-e*h;g=c*c*j+i;if(d){if(a!=d){d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15]}}else d=a;d[0]=b*t+o*u+r*v;d[1]=f*t+m*u+s*v;d[2]=k*t+n*u+A*v;d[3]=l*t+p*u+B*
v;d[4]=b*w+o*x+r*y;d[5]=f*w+m*x+s*y;d[6]=k*w+n*x+A*y;d[7]=l*w+p*x+B*y;d[8]=b*z+o*e+r*g;d[9]=f*z+m*e+s*g;d[10]=k*z+n*e+A*g;d[11]=l*z+p*e+B*g;return d};mat4.rotateX=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],g=a[5],f=a[6],h=a[7],i=a[8],j=a[9],k=a[10],l=a[11];if(c){if(a!=c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15]}}else c=a;c[4]=e*b+i*d;c[5]=g*b+j*d;c[6]=f*b+k*d;c[7]=h*b+l*d;c[8]=e*-d+i*b;c[9]=g*-d+j*b;c[10]=f*-d+k*b;c[11]=h*-d+l*b;return c};
mat4.rotateY=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],f=a[2],h=a[3],i=a[8],j=a[9],k=a[10],l=a[11];if(c){if(a!=c){c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15]}}else c=a;c[0]=e*b+i*-d;c[1]=g*b+j*-d;c[2]=f*b+k*-d;c[3]=h*b+l*-d;c[8]=e*d+i*b;c[9]=g*d+j*b;c[10]=f*d+k*b;c[11]=h*d+l*b;return c};
mat4.rotateZ=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],f=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7];if(c){if(a!=c){c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15]}}else c=a;c[0]=e*b+i*d;c[1]=g*b+j*d;c[2]=f*b+k*d;c[3]=h*b+l*d;c[4]=e*-d+i*b;c[5]=g*-d+j*b;c[6]=f*-d+k*b;c[7]=h*-d+l*b;return c};
mat4.frustum=function(a,b,c,d,e,g,f){f||(f=mat4.create());var h=b-a,i=d-c,j=g-e;f[0]=e*2/h;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=e*2/i;f[6]=0;f[7]=0;f[8]=(b+a)/h;f[9]=(d+c)/i;f[10]=-(g+e)/j;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(g*e*2)/j;f[15]=0;return f};mat4.perspective=function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b=a*b;return mat4.frustum(-b,b,-a,a,c,d,e)};
mat4.ortho=function(a,b,c,d,e,g,f){f||(f=mat4.create());var h=b-a,i=d-c,j=g-e;f[0]=2/h;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2/i;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=-2/j;f[11]=0;f[12]=-(a+b)/h;f[13]=-(d+c)/i;f[14]=-(g+e)/j;f[15]=1;return f};
mat4.lookAt=function(a,b,c,d){d||(d=mat4.create());var e=a[0],g=a[1];a=a[2];var f=c[0],h=c[1],i=c[2];c=b[1];var j=b[2];if(e==b[0]&&g==c&&a==j)return mat4.identity(d);var k,l,o,m;c=e-b[0];j=g-b[1];b=a-b[2];m=1/Math.sqrt(c*c+j*j+b*b);c*=m;j*=m;b*=m;k=h*b-i*j;i=i*c-f*b;f=f*j-h*c;if(m=Math.sqrt(k*k+i*i+f*f)){m=1/m;k*=m;i*=m;f*=m}else f=i=k=0;h=j*f-b*i;l=b*k-c*f;o=c*i-j*k;if(m=Math.sqrt(h*h+l*l+o*o)){m=1/m;h*=m;l*=m;o*=m}else o=l=h=0;d[0]=k;d[1]=h;d[2]=c;d[3]=0;d[4]=i;d[5]=l;d[6]=j;d[7]=0;d[8]=f;d[9]=
o;d[10]=b;d[11]=0;d[12]=-(k*e+i*g+f*a);d[13]=-(h*e+l*g+o*a);d[14]=-(c*e+j*g+b*a);d[15]=1;return d};mat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};
/* ]]> */
</script>
<script id="shader-fs" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

void main(void) {
gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
}
</script>
<script id="shader-vs" type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec2 vTextureCoord;

void main(void) {
gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
vTextureCoord = aTextureCoord;
}
</script>
<script type="text/javascript">
/* <![CDATA[ */

	/** GL Routines from learningWebGL / other */
	var gl;

	function fetchGLContext(canvas, attribs) {
		var type = ["webgl", "experimental-webgl", "moz-webgl", "webkit-3d"];
		var context = null;
		for (i in type) {
			try {
				context = canvas.getContext(type[i], attribs);
			} catch(e) {
			}
			if (context) {
			  break;
			}
		}
		return context;
	}

	function initGL(canvas) {
		try {
			gl = fetchGLContext(canvas, {antialias:true});
			gl.viewportWidth = canvas.width;
			gl.viewportHeight = canvas.height;
		} catch(e) {
			console.info("Could not initialise WebGL, sorry :-(");
		}
		if (!gl)
			return null;
		return gl;
	}


	function getShader(gl, id) {
		var shader, str, k,
			shaderScript = document.getElementById(id);
		if (!shaderScript)
			return null;

		str = "",
		k = shaderScript.firstChild;
		while (k) {
			if (k.nodeType == 3) {
				str += k.textContent;
			}
			k = k.nextSibling;
		}

		if (shaderScript.type == "x-shader/x-fragment") {
			shader = gl.createShader(gl.FRAGMENT_SHADER);
		} else if (shaderScript.type == "x-shader/x-vertex") {
			shader = gl.createShader(gl.VERTEX_SHADER);
		} else {
			return null;
		}

		gl.shaderSource(shader, str);
		gl.compileShader(shader);
		if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
			console.log(gl.getShaderInfoLog(shader));
			return null;
		}

		return shader;
	}

	/** Our routines start here */

	var shaderProgram;
	function initShaders() {
		var fragmentShader = getShader(gl, "shader-fs");
		var vertexShader = getShader(gl, "shader-vs");

		shaderProgram = gl.createProgram();
		gl.attachShader(shaderProgram, vertexShader);
		gl.attachShader(shaderProgram, fragmentShader);
		gl.linkProgram(shaderProgram);

		if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
			console.log("Could not initialise shaders");
		}

		gl.useProgram(shaderProgram);

		shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
		gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);
		shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
		gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);

		shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
		shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
		shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");
	}

	var mvMatrix = mat4.create();
	var mvMatrixStack = [];
	var pMatrix  = mat4.create();

	function mvPushMatrix() {
		var copy = mat4.create();
		mat4.set(mvMatrix, copy);
		mvMatrixStack.push(copy);
	}

	function mvPopMatrix() {
		if (mvMatrixStack.length == 0) {
			throw "Invalid popMatrix!";
		}
		mvMatrix = mvMatrixStack.pop();
		return mvMatrix;
	}

	function degToRad(degrees) {
		return degrees * Math.PI / 180;
	}

	var cubeVPB, headVTCB, headAccessVTCB, bodyVTCB, armLVTCB, legVTCB,
		cubeVertexIndexBuffer;

	function initBuffers() {

		cubeVPB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, cubeVPB);
		vertices = [
			// Front Ba.. T Bo R L
			-1,-1, 1, 1,-1, 1, 1, 1, 1,-1, 1, 1,
			-1,-1,-1,-1, 1,-1, 1, 1,-1, 1,-1,-1,
			-1, 1,-1,-1, 1, 1, 1, 1, 1, 1, 1,-1,
			-1,-1,-1, 1,-1,-1, 1,-1, 1,-1,-1, 1,
			 1,-1,-1, 1, 1,-1, 1, 1, 1, 1,-1, 1,
			-1,-1,-1,-1,-1, 1,-1, 1, 1,-1, 1,-1,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
		cubeVPB.itemSize = 3;
		cubeVPB.numItems = 24;

		// body and limbs are just skewed cubes, use same verts.
		bodyScale = [1.0, 1.5, 0.5];
		limbScale = [0.5, 1.5, 0.5];

		textures[0] = gl.createTexture();
		textures[1] = gl.createTexture();
		activeTexture = 0;

		// TODO for the following, what we could do to make it more readable/flexible,
		// is store it in ints for x/y, then divide by 64 or 32, depending.
		headVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, headVTCB);
		var textureCoords = [
			0.125,	0.5,	0.25,	0.5,	0.25,	0.75,	0.125,	0.75,
			0.5,	0.5,	0.5,	0.75,	0.375,	0.75,	0.375,	0.5,
			0.125,	1.0,	0.125,	0.75,	0.25,	0.75,	0.25,	1.0,
			0.25,	0.75,	0.375,	0.75,	0.375,	1.0,	0.25,	1.0,
			0.375,	0.5,	0.375,	0.75,	0.25,	0.75,	0.25,	0.5,
			0.0,	0.5,	0.125,	0.5,	0.125,	0.75,	0.0,	0.75,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		headVTCB.itemSize = 2;
		headVTCB.numItems = 24;

		headAccessVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, headAccessVTCB);
		textureCoords = [
			0.625,	0.5,	0.75,	0.5,	0.75,	0.75,	0.625,	0.75,
			1.0,	0.5,	1.0,	0.75,	0.875,	0.75,	0.875,	0.5,
			0.625,	1.0,	0.625,	0.75,	0.75,	0.75,	0.75,	1.0,
			0.875,	1.0,	0.75,	1.0,	0.75,	0.75,	0.875,	0.75,
			0.875,	0.5,	0.875,	0.75,	0.75,	0.75,	0.75,	0.5,
			0.5,	0.5,	0.625,	0.5,	0.625,	0.75,	0.5,	0.75,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		headAccessVTCB.itemSize = 2;
		headAccessVTCB.numItems = 24;

		bodyVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, bodyVTCB);
		textureCoords = [
			0.3125,	0.0,	0.4375,	0.0,	0.4375,	0.375,	0.3125,	0.375,
			0.625,	0.0,	0.625,	0.375,	0.5,	0.375,	0.5,	0.0,
			0.3125,	0.5,	0.3125,	0.375,	0.4375,	0.375,	0.4375,	0.5,
			0.5625,	0.5,	0.4375,	0.5,	0.4375,	0.375,	0.5625,	0.375,
			0.5,	0.0,	0.5,	0.375,	0.4375,	0.375,	0.4375,	0.0,
			0.25,	0.0,	0.3125,	0.0,	0.3125,	0.375,	0.25,	0.375,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		bodyVTCB.itemSize = 2;
		bodyVTCB.numItems = 24;


		armLVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, armLVTCB);
		textureCoords = [
			0.6875,	0.0,	0.75,	0.0,	0.75,	0.375,	0.6875,	0.375,
			0.875,	0.0,	0.875,	0.375,	0.8125,	0.375,	0.8125,	0.0,
			0.6875,	0.5,	0.6875,	0.375,	0.75,	0.375,	0.75,	0.5,
			0.8125,	0.5,	0.75,	0.5,	0.75,	0.375,	0.8125,	0.375,
			0.8125,	0.0,	0.8125,	0.375,	0.75,	0.375,	0.75,	0.0,
			0.625,	0.0,	0.6875,	0.0,	0.6875,	0.375,	0.625,	0.375,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		armLVTCB.itemSize = 2;
		armLVTCB.numItems = 24;


		legLVTCB = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, legLVTCB);
		textureCoords = [
			0.0625,	0.0,	0.125,	0.0,	0.125,	0.375,	0.0625,	0.375,
			0.25,	0.0,	0.25,	0.375,	0.1875,	0.375,	0.1875,	0.0,
			0.0625,	0.5,	0.0625,	0.375,	0.125,	0.375,	0.125,	0.5,
			0.1875,	0.5,	0.125,	0.5,	0.125,	0.375,	0.1875,	0.375,
			0.1875,	0.0,	0.1875,	0.375,	0.125,	0.375,	0.125,	0.0,
			0.0,	0.0,	0.0625,	0.0,	0.0625,	0.375,	0.0,	0.375,
		];
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
		legLVTCB.itemSize = 2;
		legLVTCB.numItems = 24;

		cubeVertexIndexBuffer = gl.createBuffer();
		gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
		var cubeVertexIndices = [
			// Front Ba.. T Bo R L
			0,	1,	2,	0,	2,	3,
			4,	5,	6,	4,	6,	7,
			8,	9,	10,	8,	10,	11,
			12,	13,	14,	12,	14,	15,
			16,	17,	18,	16,	18,	19,
			20,	21,	22,	20,	22,	23
		]
		gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(cubeVertexIndices), gl.STATIC_DRAW);
		cubeVertexIndexBuffer.itemSize = 1;
		cubeVertexIndexBuffer.numItems = 36;
	}


	/**
	 * To get rid of our timers
	 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
	 */
	window.FRAMERATE = 30;
    window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              window.oRequestAnimationFrame      ||
              window.msRequestAnimationFrame     ||
              function( callback, element ){
                window.setTimeout(callback, 1000 / window.FRAMERATE );
              };
    })();


	function updateTexture() {

		if (!loadedImage)
			false;

		var nextTexture = activeTexture ? 0 : 1;
		gl.bindTexture(gl.TEXTURE_2D, textures[nextTexture]);
		gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
		var texels;
		skineditormc.save();
		try {
			try {
				texels = skineditormc.getImageData(0, 0, 64, 32);
			} catch(e) {
				// if we, as the user, have asked for a file, we expect to be able to use it
				// this hits for file:/// and probably other content.
				// TODO: no idea what to do for !Gecko here
				netscape ? netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead") : true;
				texels = skineditormc.getImageData(0, 0, 64, 32);
			}
		} catch(e) {
			console.log("unable to access image data: " + e);
		}
		skineditormc.restore();
		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texels);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
		gl.bindTexture(gl.TEXTURE_2D, null);
		// we must come here first, so..
		loadedTexture = true;
		// now we're done, update which texture to use
		activeTexture = nextTexture;
	}

	/**
	 * Sync localStorage from another window
	 * @param key string which localStorage item got updated
	 */
	function updateSkinsFromAnotherTime( key ) {

		console.log( 'storage: another instance updated key ‘' + key + '’' );

		if (key == 'skins')
			skins = JSON.parse(localStorage.getItem('skins'));

		updateSkins( false );
	}

	/**
	 * Update our skins storage of the modified skin,
	 * @param refreshLocal bool update local storage copy as well
	 */
	function updateSkins( refreshLocal ) {

		if (!fCanvasSupport)
			return;

		console.log('Store the updated skins.');
		// we want this to update the list of Skins stored, to easier allow the user to pop
		if (refreshLocal && flStorageSupport) {
			try {
				localStorage['skins']		= JSON.stringify(skins);
			} catch (e) {
				console.log('failed to store skins ' + e);
			}
		}

		holder.removeChild( skinsholder );

		if ( skinsholder.hasChildNodes() ) {
			while ( skinsholder.childNodes.length >= 1 )
			{
				skinsholder.removeChild( skinsholder.firstChild );
			}
		}
		holder.appendChild( skinsholder );

		var temp, name, preview;

		for (obj in skins) {
			obj = skins[obj];
			if (obj.thumb != null) {

				temp = document.createElement('div');
				skinsholder.appendChild(temp);
				name = document.createElement('p');
				preview = document.createElement('img');
				temp.appendChild(name);
				temp.appendChild(preview);
				temp.className = 'box'; // TODO DOMy method please.
				preview.addEventListener('click', function() { loadSkin( this.skin ); }, true);
				name.addEventListener('click', function() { renameSkin( this.skin ); }, true);
				preview.src = obj.thumb;
				name.innerHTML = preview.title = preview.skin = name.skin = obj.name;
				temp.className = 'box';
			}
		}
	}

	/**
	 * Rename a stored skin
	 * @param skin string identifies which skin user wishes to rename
	 */
	function renameSkin( skin ) {

		if (skin == "")
			return;
		console.log('Renaming ‘' + skin + '’ skin.');

		var newName = prompt('What do you wish to rename ‘' + skin + "’ to?\nTo delete, rename to ''.", skin);
		
		if (newName === null) { // user aborted
			return;
		} else if (newName === "") { // user wants to delete
			console.log('Deleting ‘' + skin + '’ skin.');
			deleteSkin(skin);
		} else {
			skins[newName] = skins[skin];
			skins[newName].name = newName;
			delete skins[skin];
			updateSkins(true);
		}
	}

	/**
	 * Load skin into editor and preview
	 * @param skin string identifies which skin user wishes to load
	 */
	function loadSkin( skin ) {

		if (skin == "")
			return;
		console.log('Loading ‘' + skin + '’ skin.');

		if (skins[skin]) {

			skins[ '_previous' ].name = skin;
			if (flStorageSupport)
				localStorage['skins'] = JSON.stringify(skins);
			
			var newskin = document.createElement('img');
			newskin.onload = loadNewSkin;
			newskin.width=64; newskin.height=32;
			newskin.src = skins[skin].data;
		} else {
			console.log( skin + ' does not exist.' );
		}
	}

	/**
	 * Delete skin, and update skin selection box
	 * @param skin string identifies which skin user wishes to delete
	 */
	function deleteSkin( skin ) {

		if (skin == "")
			return;
		console.log('Deleting ‘' + skin + '’ skin.');

		if ( skin && skins[skin] ) {
			skins[skin] = {}
			delete skins[skin];
			if (skin == skins[ '_previous' ].name ) {
				skins[ '_previous' ].name = 'default'; // XXX can fail if the user deletes default
			}
			updateSkins(true);
		}
	}

	/**
	 * Reload skin, drop all updates
	 * @param skin string identifies which skin user wishes to reload
	 */
	function resetSkin( e ) {
		// if we are here, user has pressed ‘start again’
		// load previously opened skin
		loadSkin( skins[ '_previous' ].name );
	}

	function saveSkinToMinecraft( e ) {

		try {
			/* FormData is new for Firefox 4, Chrome #, find something older */
			var fd = new FormData();
			fd.append("generator", "jd.name/mcse");
			fd.append("image", skineditorm.toDataURL('image/png'));

			var xhr = new XMLHttpRequest();
			// xhr.onreadystatechange = func() {}
// TODO: fake it for clients that cant do FormData?
//Content-Type: multipart/form-data;boundary=<boundary string>
//Content-Length: <length>
//--<boundary string>
//Content-Disposition: form-data, name="<input element name>"
//
//<input element value>
//--<boundary string>
//Content-Disposition: form-data, name=<input element name>"; filename="<input element value>"
//Content-Type: application/octet-stream
//
//<element body>
			// xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			xhr.open("POST", "http://www.minecraft.net/skin/upload.jsp");
			xhr.send(fd);

		} catch (e) {
			console.log('A problem has occured, Mojang returned a creeper.');
		}
		// upon getting confirmation, load another tab?
	}

	
	function resetLocalStorage( ) {

		if (!flStorageSupport)
			return;

		console.log( 'Purging localStorage.' );
		if (localStorage && localStorage.clear)
			localStorage.clear();
		else {
			localStorage = {};
		}
		skins = initialSkins.clone();

		updateSkins(true);
	}

	function openPushSkinDialog( e ) {
		// all this really needs to do is animate‐in the ‘I think i’m ready’ dialogue
	}

	function saveSkinToDisk( e ) {
		skinimporterchrome.click();
	}

	function saveSkinInSkinsButton( e ) {
		saveSkinInSkins("");
		e.preventDefault();
		return false;
	}

	/*
	 * stores the active canvas into localStorage with a thumbnail of the webgl context
	 */
	function saveSkinInSkins(skin) {

		if (skin == "") {
			var skinName = prompt('Please name your skin: ', skins[ '_previous' ].name );
			if (skinName == null) {
				skinName = skins[ '_previous' ].name;
				return;
			}
		} else
			skinName = skin;

		console.log('Saving ‘' + skinName + '’ skin.');
		var sthumbnail, sskin;
		if (fWebGLSupport) {

			var skinthumb = document.createElement('canvas');
			skinthumb.width=70; skinthumb.height=100;
			skinthumbc = skinthumb.getContext('2d');
			skinthumbc.drawImage(skinpreview, 0, 0, 70, 100);
			try {
				try {
					sthumbnail = skinthumb.toDataURL();
				} catch(e) {
					netscape ? netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead") : true;
					sthumbnail = skinthumb.toDataURL();
				}
			} catch(e) {
				console.log("unable to access image data: " + e);
			}
		} else {
			// TODO build a front‐only drawing of the avatar
			sthumbnail = initialSkins['default'].thumb;
		}

		try {
			try {
				sskin = skineditorm.toDataURL()
			} catch(e) {
				netscape ? netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead") : true;
				sskin = skineditorm.toDataURL()
			}
		} catch(e) {
			console.log("unable to access image data: " + e);
		}

		// TODO: for now, overwrite is default
		skins[skinName] = {
			name: skinName,
			data: sskin,
			thumb: sthumbnail,
		}
		skins[ '_previous' ].name = skinName;
		updateSkins(true);
	}

	/*
	 * helper function
	 */
	function drawAndTexture(texture) {
		gl.bindBuffer(gl.ARRAY_BUFFER, texture);
		gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, texture.itemSize, gl.FLOAT, false, 0, 0);
		gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
		gl.drawElements(gl.TRIANGLES, cubeVertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
	}

	var rxRArm = degToRad(-5), ryRArm = degToRad(0),
		rxLArm = degToRad(5), ryLArm = degToRad(0),
		ryRLeg = degToRad(3), ryLLeg = degToRad(-3),
		rzHead = degToRad(0), ryHead = 0, rBody = 0;

	var lastTime = new Date().getTime();

	function drawScene() {

		// call ourselves in the future
		requestAnimFrame(drawScene, skinpreview);

		if (!loadedTexture)
			return;

		// we first need to do any animation maths
		var timeNow = new Date().getTime();
		var elapsed = timeNow - lastTime;
		// console.timeStamp(); for firebug 1.8
		lastTime = timeNow;

		gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
		gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

		mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);
		mat4.identity(mvMatrix);

		// move to the plain we want
		mat4.translate(mvMatrix, [0.0, 0.5, -13.0]);

		// upload our constants to the graphics card
		gl.bindBuffer(gl.ARRAY_BUFFER, cubeVPB);
		gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, cubeVPB.itemSize, gl.FLOAT, false, 0, 0);
		gl.activeTexture(gl.TEXTURE0);
		gl.bindTexture(gl.TEXTURE_2D, textures[activeTexture]);
		gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
		gl.uniform1i(shaderProgram.samplerUniform, 0);
		gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);

		// we rotate everything
		mat4.rotateY(mvMatrix, degToRad(rBody));

		mvPushMatrix();
			mat4.scale(mvMatrix, bodyScale);
			drawAndTexture(bodyVTCB);
		mvPopMatrix();

		// arms
		mvPushMatrix();
			// [-1.5, 0.0, 0.0] [0.5, 1.5, 0.0]
			mat4.translate(mvMatrix, [-1.0, 1.5, 0.0]);
			mat4.rotateX(mvMatrix, ryRArm);
			mat4.rotateZ(mvMatrix, rxRArm);
			mat4.translate(mvMatrix, [-0.5, -1.5, 0.0]);
			mat4.scale(mvMatrix, limbScale);
			drawAndTexture(armLVTCB);
		mvPopMatrix();
		mvPushMatrix();
			// [1.5, 0.0, 0.0] [-0.5, 1.5, 0.0]
			mat4.translate(mvMatrix, [1.0, 1.5, 0.0]);
			mat4.rotateX(mvMatrix, ryLArm);
			mat4.rotateZ(mvMatrix, rxLArm);
			mat4.translate(mvMatrix, [0.5, -1.5, 0.0]);
			mat4.scale(mvMatrix, limbScale);
			mat4.scale(mvMatrix, [-1.0, 1.0, 1.0]);
			drawAndTexture(armLVTCB);
		mvPopMatrix();

		// legs
		mvPushMatrix();
			// [-0.5, -3.0, 0.0] [0.0, 1.5, 0.0])
			mat4.translate(mvMatrix, [-0.5, -1.5, 0.0]);
			mat4.rotateX(mvMatrix, ryRLeg);
			mat4.translate(mvMatrix, [0.0, -1.5, 0.0]);
			mat4.scale(mvMatrix, limbScale);
			drawAndTexture(legLVTCB);
		mvPopMatrix();
		mvPushMatrix();
			// [0.5, -3.0, 0.0] [0.0, 1.5, 0.0]
			mat4.translate(mvMatrix, [0.5, -1.5, 0.0]);
			mat4.rotateX(mvMatrix, ryLLeg);
			mat4.translate(mvMatrix, [0.0, -1.5, 0.0]);
			mat4.scale(mvMatrix, limbScale);
			mat4.scale(mvMatrix, [-1.0, 1.0, 1.0]);
			drawAndTexture(legLVTCB);
		mvPopMatrix();

		// draw head
		mvPushMatrix();
			// [0.0, 2.6, 0.0] [0.0, -1.0, 0.0]
			mat4.translate(mvMatrix, [0.0, 1.6, 0.0]);
			mat4.rotateY(mvMatrix, rzHead);
			mat4.rotateX(mvMatrix, degToRad(ryHead));
			mat4.translate(mvMatrix, [0.0, 1.0, 0.0]);
			drawAndTexture(headVTCB);
			// 1.125 puts it as 9,9,9
			mat4.scale(mvMatrix, [1.125, 1.125, 1.125]);
			drawAndTexture(headAccessVTCB);
		mvPopMatrix();
	}

	/* ################################## */
	function startRotatingDude(e) {

		if (!fWebGLSupport)
			return;
		canRotate = true;
		skinpreview.style.cursor='move';

		if (!e) e = window.event;
		cursorThen = [e.clientX, e.clientY];
		// TODO maybe we can scope the mouse click to decide whether we do legs, head, arms, body?
	}
	function stopRotatingDude() {

		if (!fWebGLSupport)
			return;
		canRotate = false;
		skinpreview.style.cursor='pointer';
	}

	function captureCursorLocation(e) {
		if (!canRotate)
			return;
		if (!e) e = window.event;

		cursorNow = [e.clientX, e.clientY];
		cursorDiffX = cursorThen[0] - cursorNow[0];
		cursorDiffY = cursorThen[1] - cursorNow[1];
		cursorThen = cursorNow;

		rBody -= ( cursorDiffX );
		ryHead -= ( cursorDiffY );
	}

	/* logic:
			* Animate guy always.
			: User starts drawing → reduce scene redraws, set timer for scene update
			  Timer triggers to resume animation, stop scene update, resume scene redraw
			: Rotate guy → Pause ‘animation’ of dude, [2 minutes?], allow user to rotate
	*/

	function drawOnDude(ev) {
		var x, y;
		
		// to prevent constantly blocking updates
		if (fWebGLSupport) {

		}

		if (!ev) ev = window.event;
	
		// Get the mouse position relative to the canvas element.
		if (ev.layerX || ev.layerX == 0) { // Firefox
			x = ev.layerX; y = ev.layerY;
		} else if (ev.offsetX || ev.offsetX == 0) { // Opera
			x = ev.offsetX; y = ev.offsetY;
		}

		// remove border, clamp to 64×32
		x -=3; y -=3;
		x -= x%8; y -= y%8;

		// What mode are we in?
		if (paintMode == ERASE) {
			skineditormc.clearRect( x/8, y/8, 1, 1);
			skineditorc.clearRect( x, y, 8, 8);
		} else if (paintMode == PAINT) {
			skineditormc.save();
			skineditormc.fillStyle = paintColour;
			skineditormc.fillRect( x/8, y/8, 1, 1);
			skineditormc.restore();
			skineditorc.save();
			skineditorc.fillStyle = paintColour;
			skineditorc.fillRect( x, y, 8, 8);
			skineditorc.restore();
		} else if (paintMode == DROPPER) {
			//
		} else {
			// future proof?
		}

		updateTexture();
	}


	function loadSkinFromFile(e) {

		console.log('loadSkinFromFile called.');
		//
		if (skinimporterchrome.files) {
			var oF = skinimporterchrome.files[0];
			console.log('Loading skin from file ‘' + oF.name + '’ using FileAPI.');
			var newskin = document.createElement('img');
			newskin.onload = loadNewSkin;
			newskin.file = oF;

			// For Chrome that doesn’t wont to load via .file
			var reader = new FileReader();
			reader.readAsDataURL(oF);
			reader.onload = (function(aImg, read) { return function(e) { console.log('Loaded image'); aImg.src = e.target.result; }; })(newskin, reader);
			reader.onerror = function(){ console.log('Failed to load. TODO: verbosity'); }

		} else {
			// We are positively in a non‐HTML5 browser. Firefox 3.6?
			console.log('Loading skin from file ‘' + skinimporterchrome.value + '’.');
			var newskin = document.createElement('img');
			newskin.onload = loadNewSkin;
			newskin.src = skinimporterchrome.value;
		}
		e.preventDefault();
		return false;
	}

	function roundNumber(num, dec) {
		return Math.round( Math.round( num * Math.pow( 10, dec + 1 ) ) / Math.pow( 10, 1 ) ) / Math.pow(10,dec);
	}

	/* our data: URL image loader function */
	function loadNewSkin() {

		if (!fCanvasSupport)
			return;

		skineditormc.save();
		skineditormc.clearRect(0,0,64,32);
		skineditormc.drawImage( this, 0, 0, 64, 32 );
		skineditormc.restore();

		skineditorc.clearRect(0,0,512,256);

		if ( 'mozImageSmoothingEnabled' in skineditorc ) {
			skineditorc.mozImageSmoothingEnabled = false;
			skineditorc.drawImage( this, 0, 0, 512, 256 );
		} else {
			// we *arent* Gecko. assume, for now, that thats everything that can do what we need
			// XXX we need to toggle on Opera/Chrome to do a more expensive
			console.log('Working around a flaw in your browser engine, initial load will be slower than Firefox.');

			skineditorc.save();
			var pixels = skineditormc.getImageData(0, 0, 64, 32);
			for (var x = 0; x<=64; x++ ) {
				for (var y = 0; y<=32; y++ ) {

					/* XXX avoid doing work for empty pixels */
					if ( pixels.data[((y *(pixels.width*4)) + (x*4)) + 3] != 0 ) {

						skineditorc.fillStyle = 'rgba(' +	pixels.data[((y *(pixels.width*4)) + (x*4))] + ',' +
														pixels.data[((y *(pixels.width*4)) + (x*4)) + 1] + ','+
														pixels.data[((y *(pixels.width*4)) + (x*4)) + 2] + ','+
														pixels.data[((y *(pixels.width*4)) + (x*4)) + 3] + ')';
						skineditorc.fillRect(x*8, y*8, 8, 8);
					}
				}
			}
			skineditorc.restore();
		}
		loadedImage = true;

		if (fWebGLSupport) {
			updateTexture();
		}
	}


	/** Boot our GL canvas */
	function webGLStart() {

		initShaders()
		initBuffers();

		gl.clearColor(0.0, 0.0, 0.0, 0.5);
		gl.clearDepth(1.0);
		gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
		gl.enable(gl.BLEND);

		gl.enable(gl.DEPTH_TEST);
		gl.depthFunc(gl.LEQUAL);

		// push animation onto stack
		// pushAnimation(anim.WALKING);
		drawScene();
	}


	/* because JS lacks it */
	/* http://my.opera.com/GreyWyvern/blog/show.dml/1725165 */
	Object.prototype.clone = function() {
		var newObj = (this instanceof Array) ? [] : {};
		for (i in this) {
			if (i == 'clone')
				continue;
			if (this[i] && typeof this[i] == "object") {
				newObj[i] = this[i].clone();
			} else
				newObj[i] = this[i]
		}
		return newObj;
	};


	var skinpreview, 	// WebGL canvas
		skineditor,		// drawing canvas
		skineditorm,	// saveas/pbuffer canvas
		skineditorc,
		skinsholder;

	var ERASE = -1,		// Painting, awww!
		NONE = 0,
		PAINT = 1,
		DROPPER = 2,
		paintMode = NONE,
		paintColour = '#fff';

	var skins = {},			// storage pool for drawings
		initialSkins = {};

	var loadedImage = false, // delay 3D scene if canvas is slow.
		loadedTexture = false,
		activeTexture = 0,
		textures = [];		// use buffers

	var	cursorThen = [0,0],
		cursorNow = [0,0];

	var canAnimate,
		canRotate,
		timerDrawingComplete,
		timerAnimation,
		timerDrawingScene,
		timerUpdateScene;

	// features we want to use, test for ’em
	var fDataUrlSupport 	= false,
		fJSONSupport		= false,
		fCanvasSupport 		= false,
		fWebGLSupport 		= false,
		flStorageSupport	= false;

	var skinimporterchrome;

	/*
	 * Boot our editor
	 */
	function init() {

		// Why don’t we use a large library like modernisr?
		// Well, we have a few features to test. Beyond that, we are already pushing
		// 64k before I’ve tidied. No sense making it bigger than it needs to be.

		// remove our noscript block
		warning = document.getElementById( 'noscript' );
		warning.className = 'disabled';
		if (warning.parentElement)
			warning.parentElement.removeChild(warning);
		delete warning;

		// discover console and fake up a work‐around
		if (typeof console == 'undefined') {
			console = {}
			console.log = function(message) {
			}
		}
		// push messages to Opera debug
		if (window.opera && opera.postError)
			console.log = opera.postError

		// discover if we are IE?
		if (true) {
			delete document.createElement('header');
			delete document.createElement('article');
			delete document.createElement('footer');
		}

		// Defaults
		skins = {};
		initialSkins = {};
		initialSkins['_previous'] = { name: 'default', data: null, thumb: null, }
		initialSkins['default'] = {
			name: 'default',
			data: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAE8klEQVRogeWX0U/bVhTG/UjtxCVVp0Z2YgqkxoEgh8JLglhIaYBOaNWImFo8NRVMkIYipAj2sAoFNgSESd2eIgWlmVSpUoQ29WHd9lCxxz3lf/r24FxzbeyYUlR31NInJ77HN/5+957jE4ZxOfrDfvSH/YgEO0B/jgQ70NXJYWNKbSu3+T/6gxhWu65C7bpqAhAJdmBjSkVhPI7d7Ihx3s2OXC4AxLwssI4AGIYxqTAevxwAyOpb04Bcu/QAaLOywEIWWFM6fBIA7My7AZhV5MsDgBiPhnyQBRZdndwpAHa6NACIcVpkZ/zvX4OKyEIRdVN9IodoyIfbvZ0YvKlLvenHgKTXASXEIRLsgCywGJB0ACTudm8noiEf+kQOsqDPqYgs3PoIr/2bAMgCi5jEIxryYUDyYzgSwIDkNzQcCeBO/zWk+j9DTOKhhDgjJhryISbxxjw0gHZ9hNf+mZjEQw7qq6Yb56GIHCJB1gDxV/kpjp8X8W9lC8c/FXH8fB2/fTePkVvXEA35EAmyUEQOAy14ssBCDnKISTzc+giv/es7QPBjMMzrqyrqqRCTeKg9ARxtLuHNziqONpfw+9YqasVv8LZcRO3JDGpPZqD2BBCTePSJHBRR30GDYR6K4IcisnDrI7z2b6SAngY+9N64gr0HSdQWM0gq1/FmZxUAMDtWxp/PlvG2XMTsWBkAcLS5hKRyHbXFDPYeJNF74wpkwQd6Trc+wmv/JwAEf2vbBrAzO4RKLo39+QRqi5P449kC/v6haLze/tl/ipeFKWxlR7A/n0All8bO7BBiUgBykDNWny6CTn2E1/4Zsu0HwzwWJlS8KNzH4eJd4w/NL48mUMmNI93tw8HMGA5mxpDp4fHzo8+xnU1gY0rFbnYEh4t38aJwHwsTqp4CrXRw6yO89s+Qf2/EdG15GpVcGgcPR7E+rWItE8PqRD/S3T7cCbPI9PDI9PD4cW4U3385jPVpFQcPR/Fr/h5qy9M4/PYL/dyaj4C09hEEnNf+Tx1f32uClqIoJrlO0Gw6N0XNJpjHj9vL7Wg09HmaTTCNBgrjcXw1dMs4fxQAnFrjCwFAzLf0aQNoNEzmW3/KvAfwIVPgvQHElSLiShFyt4a4UsRk8pVJ9Jh1PDlUBlMqnUjTwFSrYOp1bGcTeFmYwnY2ge1sAky9rouOL5X0a43GiV6/1kW+O8WTGOs4uZ/oLADkbu1cACaTr/Qfzed1lUonD96CYJgnD0TH5/Nm07TIPHQsMUjuIUCt4+cB4GTQFYDdA5KHrNf1HUGbpOPzeXvz9Bx2gOkYzwFo2skDaJr5xwkA+ppTPIlrNMyfrQbp3fShdgAdkxwqm2QYIapWzabJZ3KdjiUArKap+yu5tKG9uVEcbS6ZtDc3aoqxjp8LADFH7wBHALSZfN4MwM4YDYykgN09ra1uB6CyphkGyfULBfDONcAKgF59umLTAOgaYDFNA6HNWQFU1jRbAJU1zYg5EwBa7/0WcANgfQvYxToAsK6wFYBdilwIgHbjbYuQ9Q1gBWBXtCyizTkBaFcjXAGkUimkUilXACRuZWXFJMMQaUTI6llX3wkAHW9TD2hzdjlOA6BTgJzPDMDJoNs4nSJyt3YKoNExUgCsjZdRUEmaVKtGEXYCQEza7RDPANjtIBOEatW9ta5WTdesK2wqgGuabY14FwD/Ad2t413QljEOAAAAAElFTkSuQmCC',
			thumb: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABkCAYAAAA7Ska5AAADkUlEQVR4nO3Zz0vbYBjA8R5HnW4KwhDrnFSR6nClvdji/IXKQDysdIdtWHAwmTYIwe1gGcRN0GzgdioUxMNgIGPiwR87iB49+T89O8j79m36Jk017fs0fQrfw9Is75PP0jS6QIBeti+DkqZ8AKwpHwBrygfAmvIBsKZ8AKwpHwBrygfAmvIBsFb7RUZ6W4E11HPTyOMHvMHuFhjsboHwo3u8ga4gDHQF+f5DPa0QCRUjGIJxD/O096E/YMSTkxULt0Ms3A5TkQ7eeKQTxiOdMNzTxmOA9ZiZYLDAnJlZODOzcLGr867yBlzlDbj4rhfbXYeL3XX4++k1L97fAfH+DoIhmGaF+fP5PbBOtjQ42dJA3HZoaHBoaLCnv+WdmzqcmzrsfZgvi2D8DsMwTrY0YK+XYybvNLcMp7lljnFu6vw98cUgCYZgmhRm790ssI5zS3CcW4J/X3TeysSzsi53snC5k4VfK3M8IxUHIxUnGN/D/FycBlY+MwH5zARMPrnP+zY/VtZMXxvM9LXBj8XnvM3UKGymRgmGYJoVZm1mGFjadAS06UgJzFQoCFOhIMcQ+5pO8jYWYrCxECMY38N8nBsBLys5/vU18A4OiqGAEQcTBxWHLRRu2t/nsXsG+zpmfxYT9+dZ15CFCsYpL2EYtmwd766aO6K4HbQWMEdHxdg2cT/lMG4GlmUBkoKIx7Iek2CqgBG3KYVxGk5EczpBtg/7uBUK8hO1HpdgbGDE48quSKUw4iBuTsALGKcaAsZtMpjbHgsNTKWrohYwTmui/FZyGlI8abuTl70n+3uNAMN/D1vpX9ZjGPG/X+xCAePUdjrpDGN9Opa9J7zvZs2mhNlOJ8vWyK+94aGCkQ1WK5h8ZtKHMLJ7kfXZRfzq9yMM35aZ9BRmO520X4tgytdqmJsvG74WHyW7j21DwXh9xfgGJhAIGFIQNzCS/QjGrzAlA8qeY5x+xSDbxvavZl2CQQ5j9zwxm/gN1ZSImpCImhVhnB4sUcJYB6wnTMm9TRWM0xOoOKDXMLJ1mgLGCpSImq5g7no+nsG47bYwsuo0c31gXr24hko1JQxdMQRDMARDMARDMARDMARDMARTReJP1SxfwzidMMG4gKGPEt1jCIZgCIZgCIZgCIZgGhNmdXUVvIpgCIZgCKaWeARDMChTPgDWlA+ANeUDYE35AFhTPgDWlA+ANeUDYE35AFhTPgDK/gOLlYhBD0WfqAAAAABJRU5ErkJggg==',
		}
		initialSkins['honeydew'] = {
			name: 'honeydew',
			data: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAADG0lEQVRogd1YO26kQBDlCg4mICCzLDn12KlTEvLdDYcT+Ba2z0BqiXCEJpjABARIHACJjMDyPeiNqlUUVf1zW7PrlkpjaLrp9/pV9cNJYmnloVSm+Ly7Usf9TnV5pj7vrvQ1/G2b/59vAPTPr9+rgPtdnongj/vdzyAAAGPw8AuA4bfLs5UiLr3+Lzdu9zERsNtUBT+GgKauVpLHKdHU1QZw7BRo6ko1dbWZR7ofvQEBmAS4bupKA/94e14FEBHj/RclwFYEOfAQXZ79/ylgOwYl8BCXXr+1caCaujKCjjWmPJTRpB2cEtyi5nHwBhIyhiNgHgc1j4M3kNBxSf74oGjM47C6vr25ZsM0xjWSJEnovPM4qNubaw1Gej/uhzFSvzg+ZNExw7QG0yZF63+5T5UUUMiKotgUN3zPNIctvCUbu1Hrukwn7eyW6aSW6aTSNN0YnjRNdT8Yn2U66WeoIaImCTtFaqW5DymXPjo/xii6VLo4AAH3AOAynVRRFKooitU9OpZzhjZCKHj6dcn5CeijxFKisCOFeVbX3O5zllby+/RllBQXn4CVgH+h0Z3lXCZcU5DejRYK27FFW5dnLNDjfqfyxwedNlLY5ueOUnxaBYGmBOAFSZVVarBT1BJ3eRaVgL49rwiAYzk6AdLZKjXTl+F3EhBVASYTZBvPVVvI3e9MgWAFSCahb8+qb89WI0MB4CJFq7rPPBCShbaty7VmiTbRNbhF41MBBywOagMF40qAi5KAhCACJPm7EkCPwuN+p9X08fa8Ate3Z/1OuE+f8QWPSfAmAMvHhQTp5SD/Ls80yL49b3YX5y+AwwS4pkpoTWHPfch/l1zjXvr++qQdJa4pGBglgKYCfTY0vBTAGR+bCmwSxHnP5TcmABfdGOC9CYiVAlQl0m6Wh1LPw6mBm8s3vAn4ShHkFmCSMnaLkhpC/svkY903KcCFiQBpDABzlSqnANP80RQgFUCfQiiBfn990gXRhQApHXxqEt0cKwF4YpPrkvqwjDEg/GnsQoAtHbjNcFGlcwrYCAg5BXxJkNQQogLAY8P/F6CbuIFTQdIoAAAAAElFTkSuQmCC',
			thumb: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABkCAYAAAA7Ska5AAACz0lEQVR4nO3bPXLbMBAFYF7BhQsW7DKZcRuPWrVseIn4BDmCO0/ukd6FCxVRwUJncJ/JPYxUK8OYBbAMQe+CeJp5DUeiFp8N4odU1+EVfT0ibNQLsBr1AqxGvQCrUS/AatQLsBr1AqxGvQCrUS/Aarb/kofvD650AAMYwNSA8rkwd1+/rM6uYMbjwY3HQxGY8XgATDMwpQIYwDQK8+fXk6NM0+SmaXL+sVTo/f5nAAOYRmHeXl8cpe971/e9+/vt5pp5HNw8Dh+O+aHP0DkA0xIM1/AcDGVXMBzAPA7Ox/KvI5QUJAUwLcFIu9Lz/e0+YXyc5/vba1LXmnkcou+dx2Ef15iue5/HlIAJ5zEbbmatb7hk1y3V2CUw4/FwPeflfHKX86kumLDoVIO5awy9x8eiRaT/HRtugW7/31IahksVMFzhkuE3F8AshHl7fWGBzMCECLmE3YbrSnStupxPyfMDJgNTcKdvHQzXXTRgOKBqYcLRyB+BCMO/dULHqoBZirE1jJ+qYH7//HENHaNuw10n/K5ESwvAtAQjHVEo/sb40vMCBjA7g/GHcult2BQGNzUwPcFLLfBKw0hSBcwSjFy3iZ3P/OpastpeA8MhVLHtEIaehCoFQ8/i5f4IqjDSvp6DWDLqSKEBYxkm9UBh173fQuEa6i8TwuVCbH6Se4ARMNZhuPgwXAPDpxi4JxtyMOa7UgxFA8bUcJ3qUlvCcF2oepgYUOyYBGZte4rBSCOB8Telwg3wgtcOWzCSeQdgEhCAYWCkv0DZFUyJn+QAJjI/AUyLMLlZMmCYBnPTem4TalcwkgYDJtJg7uFGP4XWQLZgJA0GDGD+H2bD2yI2YUqkORiMShiuAZMNlgSAWRbJ1qY0gAFMwzCSjW9pANMCDJYEgAEMYLQDGMBUHfUCrEa9AKtRL8Bq1AuwGvUCrEa9AKtRL8Bq1AuwGvUCTOYfXfp3gFneuucAAAAASUVORK5CYII=',
		}

		// discover if we have JSON library in the browser
		if ( typeof JSON != 'undefined' ) {
			fJSONSupport = true;
		} else {
			console.log('TODO: missing JSON support. bugger using localStorage.' );
		}

		// discover localStorage and enable if possible - fail if no JSON
		if ( typeof localStorage != 'undefined' && fJSONSupport ) {
			flStorageSupport = true;

			console.log('We have localStorage support.');
			if (localStorage['skins'] != null) {

				skins = JSON.parse(localStorage['skins']);
			} else {

				skins = initialSkins.clone();
				try {
					localStorage['skins'] = JSON.stringify(skins);
				} catch (e) {
					console.log('Had a problem setting up localStorage: ' + e);
				}
			}

		// Safari requires you to define your event listener on the body; IE requires it to be set on the document. Firefox doesn’t care.
		// SERIOUSLY?! bugger Safari. maybe Chrome too.
		// IE: If we dont have this, wont have ‘storage’ (technically a lie, but that IE doesnt do canvas either…)
		if (document.addEventListener)
			document.addEventListener('storage', updateSkinsFromAnotherTime, false);

		} else {

			localStorage = {};
			skins = initialSkins.clone();
		}

		// discover dataURL support and continue
		// XXX took too long. Assume browsers that do canvas also support data:

		skineditor	= document.getElementById( 'skin-editor' );
		skineditorm	= document.getElementById( 'skin-editor-mini' );
		holder		= document.getElementById( 'container' );

		// discover canvas support and continue
		if (skineditor && skineditor.getContext) {

			fCanvasSupport = true;
			skineditor.className += ' enabled';
			skineditorc = skineditor.getContext( '2d' );
			skineditor.addEventListener('click',			drawOnDude, true);

			// the save image option
			skineditorm.width = 64; skineditorm.height = 32;
			skineditormc = skineditorm.getContext( '2d' );

			// need to disable for file:// Opera + Chrome, they refuse to open files
			skinimporterchrome = document.createElement('input');
			holder.appendChild(skinimporterchrome);
			skinimporterchrome.id = 'skin-selector';
			skinimporterchrome.type = 'file';
			skinimporterchrome.accept = 'image/png'; // ask for PNG images
			skinimporterchrome.addEventListener('change',	 loadSkinFromFile, false);

			skinsholder = document.createElement('div');
			holder.appendChild(skinsholder);
			skinsholder.id='skins-container';
			skinsholder.className = 'box';

			/*
			 * convert everything below either: into pure JS, or keep as HTML and fix display w/o JS
			 */

			var temp = document.getElementById( 'saveSkin' );
			temp.addEventListener('click',		saveSkinInSkinsButton, false);
			temp = document.getElementById( 'resetSkin' );
			temp.addEventListener('click',					resetSkin, false);
			temp = document.getElementById( 'submitmojang' );
			temp.addEventListener('click',		  saveSkinToMinecraft, false);
			temp = document.getElementById( 'openFile' );
			temp.addEventListener('click',			   saveSkinToDisk, false);
			temp = document.getElementById( 'pushSkin' );
			temp.addEventListener('click',		   openPushSkinDialog, false);

			// now, for the EDITING!
			palette = document.createElement('div');
			pTitle  = document.createElement('p');
			palette.appendChild(pTitle);
			pTitle.innerHTML = 'Palette';
			holder.appendChild(palette);
			palette.id='colourpalette';

			// TODO dropper?
			// now build default colours, C64 has a nice mellow palette… :
			pColours = { 'erase': 'erase', '#000000': 'black', '#FFFFFF': 'white', '#883932': 'red', '#67B6BD': 'cyan',
						 '#8B3F96': 'purple', '#55A049': 'green', '#40318D': 'blue', '#BFCE72': 'yellow',
						 '#8B5429': 'orange', '#574200': 'brown', '#B86962': 'light red',
						 '#505050': 'dark grey', '#787878': 'grey', '#94E089': 'light green',
						 '#7869C4': 'light blue', '#9F9F9F': 'light grey' };
			for (colour in pColours) {
				if (colour == 'clone')
					continue;
				temp = document.createElement('span');
				palette.appendChild(temp);
				temp.id = pColours[colour]; // XXX oops?
				temp.title = temp.id;
				temp.style.backgroundColor = colour;
				if (colour == 'erase')
					temp.addEventListener('click',
						function() { paintMode = ERASE; paintColour = 'rgba(0,0,0,0)'; skineditor.className = 'enabled erasing'; }, true);
				else
					temp.addEventListener('click',
						(function(col) {
							return function() { paintMode = PAINT; paintColour = col; skineditor.className = 'enabled painting'; }; })(colour),
						true);
			}

		} else {
			// Fallback in is HTML
		}

		skinpreview = document.getElementById( 'skin-preview' );

		// discover WebGL support and continue
		if (skinpreview && initGL( skinpreview ) != null) {

			fWebGLSupport = true;
			skinpreview.className += ' enabled';
			webGLStart();
		
			skinpreview.addEventListener('mousedown',		startRotatingDude, true);
			skinpreview.addEventListener('mouseup',			stopRotatingDude, true);
			skinpreview.addEventListener('mouseout',		stopRotatingDude, true);
			// TODO Stewart suggested to put this on document, so you can leave the preview and still drag.
			// need to verify that mouseup on document wouldnt break anything
			skinpreview.addEventListener('mousemove',		captureCursorLocation, true);

		} else if (fCanvasSupport) {

			// TODO *could* do some canvas‐generated perspective fallback here
			// Be cheeky, swap out the missing webgl support with the existing fallback image.
			// This should run for Opera, Firefox, Chrome without WebGL support
			temp = document.createElement('div');
			holder.replaceChild(temp, skinpreview);

			temp.id = 'skin-preview';
			temp.width = '350px'; temp.height = '500px';
			if ( skinpreview.hasChildNodes() ) {
				while ( skinpreview.childNodes.length >= 1 ) {
					temp.appendChild( skinpreview.removeChild( skinpreview.firstChild ) );
				}
			}
			delete skinpreview;
			skinpreview = document.getElementById( 'skin-preview' );

		} else {
			// XXX IE before version 9, please die.
			skinpreviewi = document.getElementById( 'skin-preview-img' );
			skineditori = document.getElementById( 'skin-editor-img' );
			skinpreviewi.style.position = skineditori.style.position = 'absolute';
		}

		loadSkin( skins[ '_previous' ].name );
		updateSkins(false);
	}

if (document.addEventListener)
	document.addEventListener("DOMContentLoaded", init, false);
else {
	window.onload = init;
}
/* ]]> */
</script>

</head>
<body>

<header><h1><span id="minecraft">Minecraft</span> Skin Editor</h1></header>

<article id="container">
	
 <style>
	html, h1, p, div, article { margin: 0; padding: 0; }
	article, canvas, #skins-container, #skin-preview, #skin-editor, img { display: block; /*IE*/ }

	body { width: 700px; margin: 0 auto; }

	@font-face { font-family: Munro; src: local('Munro'), url(i/munro.ttf); text-rendering: optimizeLegibility; }

	html { height: 100%; color: white; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAAAAAByaaZbAAAACXZwQWcAAAAwAAAAMADO7oxXAAAACXBIWXMAAABIAAAASABGyWs+AAAAvUlEQVRIx72VwQoEIQxD5zsCBQ/9/2/cQyBk21n2ZHpSxzekUdvnnFMW55zu7m4A3b2/PhFAmzyqSmMA3FZVGQAAJWrA3RStP3KQATQh7Cv1HUmAincMrwEEAIkbopWPFjkNABTnwFjxqwkgAGz1Cr+LyjMDeJkYb2BHBtjq9zHT7pfKdwegXH8A8lTSlVgAkFbKHZ6OKYAA8GqrJ/OnZd0B1G/26dJcTyMD/Krsbu7s0zeBUSZ2FZtV4zrwAZYHGyR4NaVcAAAAAElFTkSuQmCC) #232323; margin:0; font-family: Munro, monospace; }

	body { width: 900px; min-height: 100%; margin: 0 auto; }
	article { position: relative; }

	a { color: inherit; background: transparent; }

	#minecraft { background: url(i/minecraft.png) transparent no-repeat; display: inline-block; text-indent: -9999px; min-width:270px; height:45px; min-height: 45px; }
	header h1, footer { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAwFBMVEVZPio2JhpFMiMwIhhBLiA6KRwiGBFALB4qHhQ+Kx0uIBYrHhU4KBxWPClJNCUpHBMfFQ4zJBkmGhJKNSUtLS0yIxgoHBRPNyUiIiIgFg8sHxYwMDAqHRQkGRE5KBtCQkIvIRdROCc0JBkkGhI0JRo9LB9KMyM4JxsaEgxeQS0YEAtcQCw3NzcXEAs7Kh0mHBNfQi0iFxA3JxslGRFDMCFMNSQcEw1bQCtIMyQ/LSA1JhsnGxI2JhkhFxAnHBM8Kh3NW47EAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAwAAAAMADO7oxXAAACkUlEQVRIS5WUa1NaQRBEVwIkAZFHBCRAQEFQeQuoCWD+/7/K2WmcurkxSdFVTp3p3eaLvTcsl8svpp+m1FosFt3XDCcH7u/vkzdSqwfwNcN8Pr+4uOBgboJ7vZ5WjlndL5pCLpdj6XQ6OZMCWhVwv2OKgZeXFw/AHphMJqzuHwPPz8+yWJxRknVVTgx8M8kSoyR7AA5IbrlcdtaBc9kkJ2QymXa7zTIej2EOANaMSaY7ETzw+PioAOABme5E2Gw2BEql0tnZGUwAYN2YZLoDxIBcrN1up1UOK8DPJdfTA9lsdjgcMhXQKocVIJBcA3+1Wi1r0kHtTUo6oOvr61CtVrG+m2CmB6omBxQD9Xp9vV4rADPXb6qbHFAMNJtNt6bTqaBpSsLt7a1mDHS73Q8mAgLdSwKvRzNst9s/A1tTEn4L9Pt9Hehx9U1APp9POSiMRiOWkUnt1zFAIOXE98C9QqGQDBRMwGq1SjkxcH5+rl2geTgcxH7qZmz1V5NAs9Vqif3UzdMDP0ws+uy0TGKX3gbAzVg+VKlUPpkqJrFL1QSGaqsC+jQoIHYpAMSAasjLlCvAIeaO7lxeXsZvh9rWaDQ+mgQ4T09P7ugOAfgYeH19/WwSKOCOB+BApXYm1Y56ia+uruSwEnYIlETvS4UhICYgh5V7DukAbflPYDAY3N3dURJAneEDOnhPx28ur4cA/3NAFcDtvqe/Bvjipu+axqbAK6Ek+YTUH4Af4lPHhAH5MUBJkgH1B3h4eNjv90wYkB94VpRkZeJAqxyuUh4mDMgP/PGUcG9ubgQ+JedjgHrIpV7/DjRMMcCLmc1mtEXgU3I+BugTi/on5n8s1oqcCZ8eWCwWvBXKuDDBBMRakTOBX0m2AlUoQDmeAAAAAElFTkSuQmCC) transparent repeat-x; height:45px; vertical-align: text-bottom; line-height: 60px; }

	canvas, .box, div#skin-preview { border: 3px solid grey; background: transparent; background: rgba(0,0,0,0.4); font-family: Munro, monospace; }
	canvas, .box, div#skin-preview {
	-moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch;
	-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch;
	-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch;
	border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAF9JREFUGNNjYGBg+E8EZvh/7tw5MJ48eTIKzs3NRShavXr1/9jYWBRcUFDw393dHVVRWloamAMDdXV1qIpARoN0E6uIBa8ikBtAEiDc0NDwH6ui9PR0FIcnJCSgKiKEAVysfvK8Ec9lAAAAAElFTkSuQmCC) 3 stretch stretch; }

	.sign { padding: 6px 4px; text-align:center; color: black; margin: 2px; border: 0; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAYCAYAAAC8/X7cAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCFRE6LdS4+coAAAG7SURBVFjD1ZdBWsIwEIW5GQq4dKF8wh1UBAQvoAhtab2CO0UpZ6xtJi9tJg1BdrP4F4Q0My+Zvkw7n6vroo1DNrbAeJ6NFHz+djFQ7OLbVvbpyMIXl8fh8Q8fYwV+d8QLiGa9ouInGRKxTV4+nDcW2JVjRHuiocTCwocWPL7JTecrXwCOBAM4stzQXjI8gX16dyZUUhCAeBxffPkC3h66RZPV44XifWKTPPcVSBhsppeKaNojZjbZcmCRMvD85olYgwmB+PG8b4H15QtACXHbTMpJFdzW+JF/g4j4LctCsbXBOuZ/DS8lgA3z2SpeZvkCQhcJt03ffJQIT/hc3PiE8xKLF8AvsNpGj9sXQOm43Ci+NKaEtEBnvi5FlNCp8eULgB3BnriNrjXbykIbNpoCbYcoobhaqySZAzKD7OWKWBKIayxVr+faKcXHOtxO5Qvw2WiofQ6VFBLldnqqjZ4aX74AHCUX4mvmfBfZf192jKN0uABfM2cuMv49IFZAKLD7gWG3FABC6oTstrnegPbxUHxu89hw+QJe77tFBbdTDpor01ZrYHuGqU3atNyF2z4DrMfj+PIx7bR0AX97PON3/TkS7QAAAABJRU5ErkJggg==) no-repeat #ab8c55; background-size: 100% 100%; }

	div#skin-preview { overflow: hidden; }
	div#skin-preview p { position: absolute; color: white; background: transparent; top: 5px; left: 5px; }

	#skin-preview, #skin-editor, #wip, #skins-container, #colourpalette { position: absolute; }
	#wip, #colourpalette, #skins-container, #skin-editor, #skin-editor-img, #doshit { left: 374px; width: 512px; }
	#wip, #skin-selector, #output { top:540px; }

	#wip { font-size: 115%; /* centralise for a lightbox? */ left: 10px; height: 150px; width: 344px; }
	#wip code {font-family: Munro, monospace; }
	#wip a { color: black !important;}

	#skins-container { padding:0; background: rgba(0,0,0,0.5); /* later top: 320px; */ top: 370px; height: 149px; min-width:260px; overflow: scroll; overflow-y: hidden; white-space: nowrap; }
	#skins-container:empty { display:none; }
	#skins-container div { padding: 2px 4px; display: inline-block; text-align: center; height: 124px; width: 80px; overflow: hidden; }
	#skins-container p { cursor: pointer; color: white; background: transparent; overflow: ellipsis; }
	#skins-container img { margin: 0 3px; cursor: pointer; }

	#colourpalette { border: 2px outset #eee; border-image: url(); z-index: 20; left: 375px; top: 275px; color: #999; background: #ccc; padding: 0 4px; width: 503px; }
	#colourpalette span { display: inline-block; text-indent: -9999px; background: transparent; overflow: hidden; width: 21px; height: 21px; border: 2px inset lightgrey; }

	#doshit { position: absolute; top: 335px; }
	#skin-editor, #skin-editor-img, #skin-preview, #skin-preview-img { top: 5px; }
	#skin-preview, #skin-preview-img { left: 10px; }

	#skin-editor.erasing, #colourpalette #erase { cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAZCAYAAAAiwE4nAAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCFgA4GL9sOcIAAAF2SURBVEjHY2AgDvxnoCP4DwL0tHTUwqFvId1TKc18gI6pqR4zjtABmiH/SVQ/uHw4aOMYA3x5+rzj8pQ5/0/WtP3fHZEKx3ui08F4d1QaGO8KTfp/ddbC/xTnw7Nt/f/vrtn0/9vrN/+/v3kLpjHwy9f/P91/9P/2srX/r81e9J9sC99eutZxoXfq/6/PXoAxyGAYGxc+09xDvoX3N23//+L4aaIsguHzHRPJsxAYRB1Xps8HBxmxloHwhe4p5Fl4b/3W/++u3yLJMlA8kpRwYAygRR23lq6BByUwpRJl4eNd+/8/2LqL9PwKSmnExhsslYLYoCgA0h0kWwiKhx9v3///8f7D/58fPkLwp8+YGCgOVgfEj7bv/f9g807ySqMTlc0kpUyQL28sXPH/+bFT5Fl4qrb9/4fb94i28Nnh4//vrNxAflkLSmkvT50D+xLdp6AEBMMwsVuLV/2/s3ojZYU7KB4PpBaAy0h8eF989n9QikbWCwBbhQgfoI/AOgAAAABJRU5ErkJggg==) 9 9, auto; }
	#skin-editor.painting, #colourpalette span { cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAZCAYAAAAiwE4nAAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCFgA4BkVjBKEAAABBSURBVEjHY2AgDvxnoCP4DwL0tHTUwqFvId1TKc18gI6pqR4zjtABmiH/SVQ/uHw4aON4tCwdtXC0LB0Fo2CQAAAjsYCAJaT9SgAAAABJRU5ErkJggg==) 9 9, auto; }


	/* if the user doesn’t have JS, or Canvas support, no point doing this */
	#skin-preview.enabled { cursor: pointer; }
	#noscript { clear:both;}
	#noscript.disabled { display: none; }
	#skin-editor.enabled, #colourpalette #erase, #skin-editor-img { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH2wIODxsDFVG/AgAAAClJREFUGNNjvHnz5n8GJKCmpobMZWBiIAAoV8D4//9/FDfcunWL3m4AADstCpWDR4PDAAAAAElFTkSuQmCC); }

 	#skin-selector { position: absolute; left: 10px; visibility: hidden; }

	.button { display: inline-block; background: #888; padding: 1px 3px ; margin: 2px; border: 2px outset #ccc; color: white; text-shadow: black 1px 1px; text-decoration:none; }
	.button:hover, .button:focus { color: #ff4; background: #48e; border: 2px outset #7ae; }
	.button:active { color: #ddd; background: #999; border: 2px inset #bbb; }

	#output canvas { float: left; }
	#output h1 { font-size: 20px; }
	#output p {clear:both; }
	#output { padding: 4px; position: absolute; left: 374px; }
	#output .button { float: right; clear: right; margin: 2px 4px;  }
	
	footer { position: fixed; bottom: 0; padding: 0; width: 900px; line-height: inherit; height: 26px !important; background-position: center -22px; -moz-transform: scaleY(-1); transform: scaleY(-1); }
	footer p { padding: 2px 10px; -moz-transform: scaleY(-1); transform: scaleY(-1);  }
 </style>
 <p id="wip" class="sign box">Work‐in‐progress. Please send suggestions to <a href="mailto:jdrinkwater@gmail.com">jdrinkwater@gmail.com</a>. Code history <a href="http://johndrinkwater.name/code/mcse/">here</a>, licensed AGPL where applicable. <br/>
© <a href="http://johndrinkwater.name/">JD</a>, <a href="http://sylvester.jcoglan.com/">JC</a>, <a href="http://mojang.com/">Mojang</a>, <a href="http://www.tenbytwenty.com/munro.php">10×20</a>, <a href="http://learningwebgl.com/blog/">learningWebGL</a>.<br />
<code>HTML5</code> demo: <code>canvas</code>, <code>WebGL</code>, <code>localStorage</code>.<br />
<a href="http://flattr.com/thing/138557/Minecraft-WebGLHTML5-Skin-Editor" class="flattr" target="_blank">
<img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a></p>

 <canvas id="skin-preview" width="350" height="500">
  <img id="skin-preview-img" src="i/3d-tease.png" width="350" height="500" alt="Minecraft Default Skin Preview" />
  <p>Sorry, you browser does not support <em>WebGL</em>, <a href="http://get.webgl.org">click here to find a browser that does</a>. Pretend this image is rendered by your graphics card in real‐time.</p>
 </canvas>

 <canvas id="skin-editor" width="512" height="256">
  <img id="skin-editor-img" src="i/char.png" width="512" height="256" alt="Minecraft Default Skin" />
  <p>Sorry, your browser does not support Canvas. Which kinda makes this whole application redundant.</p>
 </canvas>

 <div id="doshit"><a href="#finishedpokingbits" id="saveSkin" class="button">Save</a> <a href="#Imadeabooboo" id="resetSkin" class="button">Start Again</a> <a href="#wedontneedclouds" id="openFile" class="button">Open From Disk</a> <a href="#notcheatthis" id="pushSkin" class="button">I’m Finished Drawing!</a></div>
 <div id="output" class="box"><h1>I think I’m ready to save… </h1><canvas id="skin-editor-mini" name="image" width="64" height="32">?</canvas><a class="button" href="#savetonotchbabyyeah" id="submitmojang">… to Minecraft!</a><br /><!--<a href="#libertarianmoi" id="jsapisucksatm" class="button">… to Disk.</a> because you cant without hacks --><p>…to Disk: right click this image and select Save.</p></div>

 <p id="noscript">While I’m the first person to complain about the needs of JavaScript for many a‐website, this is an ‘application’, it can’t run without the code being used. Please toggle NoScript, or try this in a browser that supports JavaScript.</p>

</article>

<footer><p>Parts <a href="http://creativecommons.org/licenses/by-sa/2.0/deed.en_GB"><svg xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle; padding-bottom:3px; width:.95em; height: .95em;" width="16px" height="16px" viewBox="-2 -2 66 66"><circle cx="32" cy="32" r="28" fill="none" stroke="white" stroke-width="7px" /><path d="m19.63,41.14 c-2.8,-1 -5.1,-4 -5.5,-7.43 -0.6,-5.06 1.327,-9 5.2,-10.75 2.1,-0.96 5.93,-0.93 8.2,0.05 1.4,0.6 4,3 4,3.6 0,0.1 -0.9,0.64 -2,1.17 l-2,1 c-0.87,-1.06 -1.9,-1.74 -3.1,-2.3 -1.37,-0.26 -3,0.35 -3.74,1.4 -1.23,1.72 -1.3,6.2 -0.15,7.974 0.6,0.92 1.6,1.6 2.6,1.6 2,0.16 2.5,-0.02 3.7,-1.26 l1.2,-1.26 1.54,0.85 c0.85,0.47 1.66,0.96 1.8,1.1 0.52,0.47 -1.86,2.9 -3.77,3.85 -1.63,0.8 -2.14,0.92 -4.3,0.9 -1.34,-0.013 -3,-0.22 -3.67,-0.46z m18.32,0 c-2.8,-1 -5.1,-4 -5.5,-7.43 -0.6,-5.06 1.327,-9 5.2,-10.75 2.1,-0.96 5.93,-0.93 8.2,0.05 1.4,0.6 4,3 4,3.6 0,0.1 -0.9,0.64 -2,1.17 l-2,1 c-0.87,-1.06 -1.9,-1.74 -3.1,-2.3 -1.37,-0.26 -3,0.35 -3.74,1.4 -1.23,1.72 -1.3,6.2 -0.15,7.974 0.6,0.92 1.6,1.6 2.6,1.6 2,0.16 2.5,-0.02 3.7,-1.26 l1.2,-1.26 1.54,0.85 c0.85,0.47 1.66,0.96 1.8,1.1 0.52,0.47 -1.86,2.9 -3.77,3.85 -1.63,0.8 -2.14,0.92 -4.3,0.9 -1.34,-0.013 -3,-0.22 -3.67,-0.46z" fill="white" stroke="white" stroke-width="1px" /><switch><g></g><foreignObject width="2em" height="1em">CC</foreignObject></switch></svg> BY‑SA</a> John Drinkwater 2002–2011, see About</p></footer>

</body></html>
